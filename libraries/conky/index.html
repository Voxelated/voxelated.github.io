<!-- This file defines the header to use when generating documentation with -->
<!-- DoxyFormat.                                                            -->
<html>
  <head>
    <!-- Import Google Icon Font -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Let the browser know that the website is optimized for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Conky : Conky</title>
    <title>Conky</title>
    <link rel="shortcut icon" href="VoxelLogoSmall.png">
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <!-- NOTE: We first load the doxygen stylesheet, and then we try and load the stylesheet of the site
               to which this documentation will belong, and then we load the custom stylesheet
      -->
    <link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <link href="/css/main.css" rel="stylesheet" type="text/css"/>
    <link href="sytlesheet.css" rel="stylesheet" type="text/css"/>
    <!-- Load the javascript which converts the doxygen output to material style -->
    <script type="text/javascript" src="DoxyFormat.js"></script>
  </head>
  <div class="navbar-fixed z-depth-1">
  <nav>
    <!--div class="nav-wrapper z-depth-1"-->
      <!-- All libraries are in the libraries/ dir, and the main index.html   -->
      <!-- is at ../                                                          -->
      <ul class="left">
        <li><a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons material-icons-logo">menu</i></a></li>
        <li><a href="https://voxelated.github.io/index.html" class="voxel-header-logo"><img src="VoxelLogoSmall.png" class="logo">oxel </a></li>
        <li><a href="https://voxelated.github.io/GettingStarted.html" class="voxel-navbar-element hide-on-med-and-down">GettingStarted</a></li>
        <li><a href="https://voxelated.github.io/Guides.html" class="voxel-navbar-element hide-on-med-and-down" >Guides</a></li>
        <li><a href="https://voxelated.github.io/Libraries.html" class="voxel-navbar-element hide-on-med-and-down">Libraries</a></li>
        <li><a href="https://github.com/Voxelated/Conky" class="voxel-navbar-element hide-on-med-and-down">Repository</a></li>
      </ul>
      <form>
        <div class="input-field hide-on-med-and-down right">
          <input id="search" type="search" placeholder="Search" required>
          <label for="search"><i class="material-icons">search</i></label>
          <i class="material-icons">close</i>
        </div>
      </form>
    <!--/div-->
  </nav>
  </div>
  <div class="col s2 m2 l3">
    <ul id="slide-out" class="side-nav z-depth-2 left-aligned">
      <li><a href="https://voxelated.github.io/GettingStarted.html">GettingStarted</a></li>
      <li><a href="https://voxelated.github.io/Guides.html">Guides</a></li>
      <li><a href="https://voxelated.github.io/Libraries.html" class="voxel-navbar-element">Libraries</a></li>
      <li><a href="https://github.com/Voxelated/Conky" class="voxel-navbar-element hide-on-med-and-down">Repository</a></li>
    </ul>
  </div>
  <body class="site">
    <div id="top">
      <div id="content" class="site-content">
        <div class="row">
          <div class="col s0 m2 l3"> 
          </div>
    <!-- The rest is filled by doxygen ... -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Conky </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Conky is a concurrency and parallelism library. It is designed to make writing efficient multi-threaded and massively parallel code simple. The long term goal is to allow automatic scalling across multiple multi-core machines, where each machine may contain nodes with accelerators (GPUs, for example).</p>
<p>Initially the implementation is linux based, however, the intention is to provide cross-platform solution.</p>
<p>Currently, the main concurrent container is a circular work-stealing deque. The dequeue allows the owning thread to push and pop onto the bottom of the dequeue, and allows any other thread to steal from the top of the dequeue. The number of elements which the dequeue may store is compile-time defined, and the implementation is further optimised for power of 2 sized elements, so power of 2 sizes should be used.</p>
<p>Built on top of the circular dequeue is a thread pool, where the size of each of the per thread task queues can be specified, as well as the alignment for the tasks, and the stealing policy.</p>
<p>The currently implemented stealing policies are <b>random</b> and <b>nearest neighbour</b>. Random randmly generates the index of the queue to steal from, while nearest neighbour looks for the nearest neighbours, and looks one neighbour further each time it fails to steal. Nearest neighbour generally has better performance, and benchmarks show that the performance under contention is far superior.</p>
<p>The tasks stores by the thread pool are completely unintrusive &ndash; it is not required that a class overrides the task type or anything like that, so pretty much <b>anything</b> can be pushed onto the thread pool, it just needs to have a call operator, and if it required parameters, the values of the parameters must be given when pushing the work onto the queue.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> constexpr iterations = 100;</div><div class="line"></div><div class="line">Voxx::System::CpuInfo::refresh();</div><div class="line"><a class="code" href="classVoxx_1_1Conky_1_1ThreadPool.html">Voxx::Conky::ThreadPool&lt;1024&gt;</a> threadPool(Voxx::System::CpuInfo::cores());</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><span class="keyword">struct </span>WorkFunctor {</div><div class="line">  <span class="keywordtype">void</span> operator(<span class="keywordtype">float</span> u) {</div><div class="line">    <span class="comment">// Functor body ...</span></div><div class="line">  };</div><div class="line">  T t;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; iterations; i++) {</div><div class="line">  <span class="keywordflow">if</span> (i % 2) {</div><div class="line">    threadPool.tryPush(WorkFunctor&lt;double&gt;(), uValue);</div><div class="line">    <span class="keywordflow">continue</span>;</div><div class="line">  }</div><div class="line"></div><div class="line">  threadPool.tryPush([] (<span class="keyword">auto</span> someValue, <span class="keywordtype">float</span> someOtherType) {</div><div class="line">    <span class="comment">// Some other work body ...</span></div><div class="line">  }, someValueToUse, someOtherTypeToUse);</div><div class="line">}</div><div class="line"></div><div class="line">threadPool.waitTillIdle();</div></div><!-- fragment --><p><b>Note</b>: <code>waitTillIdle()</code> will use the calling thread to execute tasks if there are still tasks to be executed.</p>
<p>The performance of the thread pool is shown to be very good by the provided benchmarks (located in the <code>tests</code> directory).</p>
<h2>High Level Algorithms</h2>
<h2>Dependencies</h2>
<p>Conky requires the general purpose utility library from Voxel, which can be found at: [<a href="https://github.com/Voxelated/Voxel">repository</a>| <a href="https://voxelated.github.io/libraries/voxel/index.html">documentation</a>]</p>
<h2>Licensing</h2>
<p>This is completely free software, you can do whatever you like with it. </p>
</div></div><!-- contents -->
<footer class="page-footer">
  <!--div class="container"-->
    <div class="row">
      <div class="col s0 m2 l3">
        <!-- Padding -->
      </div>
      <div class="col s12 m8 l6">
        <div class="left">
          <h5 class="blue-grey-text text-darken-1"><!-- Main footer content--></h5>
          <p class="blue-grey-text text-darken-1"><!--More content --></p>
        </div>
        <div class="right">
          <h5 class="blue-text text-darken-4"><!--Links --></h5>
        </div>
      </div>
      <div class="col s0 m2 l3">
        <!-- Padding -->
      </div>
    </div>
  </div>
  <div class="footer-copyright">
    <div class="row">
      <div class="col s0 m2 l3">
      </div>
      <div class="col s12 m8 l6">
        <div class="left">
          Â© 2017 Rob Clucas
        </div>
        <div class="right">
          <a class="grey-text text-lighten-4" href="#!"><!--More links--></a>
        </div>
      </div>
      <div class="col s0 m2 l3">
      </div>
    </div>
  </div>
  <!--/div-->
</footer>
